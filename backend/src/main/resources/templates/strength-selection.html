<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì¥ì  ì„ íƒ - VOIN</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        min-height: calc(100vh - 40px);
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2em;
        margin-bottom: 10px;
      }

      .header p {
        opacity: 0.9;
        font-size: 1.1em;
      }

      .content {
        padding: 40px;
      }

      .step-section {
        margin-bottom: 40px;
      }

      .step-title {
        font-size: 1.6em;
        margin-bottom: 20px;
        color: #495057;
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .step-number {
        background: #667eea;
        color: white;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1em;
        font-weight: bold;
      }

      .step-description {
        color: #6c757d;
        font-size: 1.1em;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .progress-container {
        margin-bottom: 30px;
      }

      .progress-text {
        text-align: center;
        font-size: 0.9em;
        color: #6c757d;
        margin-bottom: 10px;
      }

      .progress-bar {
        background: #e9ecef;
        border-radius: 50px;
        height: 8px;
      }

      .progress-fill {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50px;
        height: 100%;
        transition: width 0.3s ease;
        width: 0%;
      }

      /* ì¹´í…Œê³ ë¦¬ ì„ íƒ ìŠ¤íƒ€ì¼ */
      .categories {
        display: flex;
        gap: 12px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .category-btn {
        padding: 12px 20px;
        border-radius: 25px;
        border: 2px solid #e9ecef;
        background-color: #f8f9fa;
        color: #495057;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1em;
        font-weight: 500;
      }

      .category-btn:hover {
        border-color: #667eea;
        background-color: #f0f4ff;
        transform: translateY(-2px);
      }

      .category-btn.selected {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: #667eea;
      }

      /* í‚¤ì›Œë“œ ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
      .keyword-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .keyword-card {
        background-color: white;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 20px 16px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        font-size: 1em;
        font-weight: 500;
        min-height: 90px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .keyword-card:hover {
        border-color: #667eea;
        box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        transform: translateY(-3px);
      }

      .keyword-card.selected {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-color: #667eea;
      }

      .keyword-card.selected::before {
        content: "âœ“";
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 1.2em;
        font-weight: bold;
      }

      /* ìš”ì•½ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
      .summary-box {
        background: #f8f9fa;
        border-left: 4px solid #667eea;
        border-radius: 0 12px 12px 0;
        padding: 25px;
        margin: 30px 0;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .summary-box h3 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.2em;
      }

      .summary-box p {
        margin: 10px 0;
        line-height: 1.6;
        color: #495057;
      }

      .summary-box strong {
        color: #333;
      }

      /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
      .btn {
        display: inline-block;
        padding: 15px 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        text-decoration: none;
        border-radius: 50px;
        font-weight: 600;
        transition: all 0.2s ease;
        border: none;
        cursor: pointer;
        font-size: 1em;
        text-align: center;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      }

      .btn.secondary {
        background: #6c757d;
      }

      .btn.secondary:hover {
        box-shadow: 0 6px 20px rgba(108, 117, 125, 0.4);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .btn-group {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 40px;
      }

      /* ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
      .alert {
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        font-weight: 500;
        text-align: center;
      }

      .alert.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }

      .alert.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }

      /* ë¡œë”© ìŠ¤íƒ€ì¼ */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid #f3f3f3;
        border-top: 2px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-right: 10px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* ë‹¨ê³„ë³„ í‘œì‹œ */
      .step {
        display: none;
        animation: fadeIn 0.3s ease;
      }

      .step.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ì¹´ë“œ ì™„ë£Œ ìŠ¤íƒ€ì¼ */
      .final-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 40px;
        border-radius: 20px;
        margin: 30px 0;
        text-align: center;
      }

      .final-card h2 {
        margin-bottom: 20px;
        font-size: 1.8em;
      }

      .selected-items {
        background: white;
        color: #333;
        padding: 25px;
        border-radius: 15px;
        margin: 20px 0;
        text-align: left;
      }

      @media (max-width: 768px) {
        .content {
          padding: 30px 20px;
        }

        .categories {
          flex-direction: column;
          align-items: stretch;
        }

        .category-btn {
          text-align: center;
        }

        .keyword-grid {
          grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
          gap: 15px;
        }

        .btn-group {
          flex-direction: column;
          align-items: center;
        }

        .btn {
          width: 100%;
          max-width: 300px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>â­ ì¥ì  ì„ íƒ</h1>
        <p>ë‹¹ì‹ ì˜ ê²½í—˜ì—ì„œ ê°€ì¥ ë¹›ë‚¬ë˜ ì¥ì ì„ ì„ íƒí•´ë³´ì„¸ìš”</p>
      </div>

      <div class="content">
        <!-- ì§„í–‰ë¥  í‘œì‹œ -->
        <div class="progress-container">
          <div class="progress-text">
            ë‹¨ê³„ <span id="currentStepText">1</span>/3
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>

        <!-- 1ë‹¨ê³„: ì½”ì¸ ì¹´í…Œê³ ë¦¬ ë° í‚¤ì›Œë“œ ì„ íƒ -->
        <div class="step active" id="selectionStep">
          <div class="step-section">
            <div class="step-title">
              <span class="step-number">1</span>
              ì–´ë–¤ ì¥ì ì´ ê°€ì¥ ë‹ë³´ì˜€ë‚˜ìš”?
            </div>
            <div class="step-description">
              ë¨¼ì € ì¥ì  ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•œ í›„, ê°€ì¥ ë‹ë³´ì˜€ë‹¤ê³  ìƒê°í•˜ëŠ” êµ¬ì²´ì ì¸
              ì¥ì ì„ í•˜ë‚˜ ê³¨ë¼ì£¼ì„¸ìš”.
            </div>

            <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
            <div id="coin-categories" class="categories">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

            <!-- í‚¤ì›Œë“œ ì„ íƒ -->
            <div id="keyword-grid" class="keyword-grid">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

            <div id="selectionAlert"></div>

            <div class="btn-group">
              <a href="/" class="btn secondary">í™ˆìœ¼ë¡œ</a>
              <button id="nextBtn" class="btn" onclick="goToSummary()" disabled>
                ì„ íƒ ì™„ë£Œ â†’
              </button>
            </div>
          </div>
        </div>

        <!-- 2ë‹¨ê³„: ì„ íƒ í™•ì¸ ë° ìš”ì•½ -->
        <div class="step" id="summaryStep">
          <div class="step-section">
            <div class="step-title">
              <span class="step-number">2</span>
              ì„ íƒí•œ ë‚´ìš©ì„ í™•ì¸í•´ì£¼ì„¸ìš”
            </div>
            <div class="step-description">
              ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ ì¥ì  ì¹´ë“œë¥¼ ìƒì„±í• ê¹Œìš”?
            </div>

            <div class="summary-box" id="summaryContent">
              <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

            <div id="summaryAlert"></div>

            <div class="btn-group">
              <button class="btn secondary" onclick="goBackToSelection()">
                ë‹¤ì‹œ ì„ íƒí•˜ê¸°
              </button>
              <button class="btn" onclick="createCard()">
                ì¥ì  ì¹´ë“œ ìƒì„±í•˜ê¸°
              </button>
            </div>
          </div>
        </div>

        <!-- 3ë‹¨ê³„: ì™„ë£Œ -->
        <div class="step" id="completeStep">
          <div class="step-section">
            <div class="step-title">
              <span class="step-number">3</span>
              ì¥ì  ì¹´ë“œ ìƒì„± ì™„ë£Œ!
            </div>

            <div class="final-card">
              <h2>ğŸ‰ ì¥ì  ì¹´ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
              <div class="selected-items" id="finalCardInfo">
                <!-- ìƒì„±ëœ ì¹´ë“œ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
              </div>
            </div>

            <div class="btn-group">
              <a href="/" class="btn secondary">í™ˆìœ¼ë¡œ</a>
              <a href="/cards" class="btn">ë‚´ ì½”ì¸ ë³´ê¸°</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ì „ì—­ ìƒíƒœ ê´€ë¦¬
      const state = {
        currentStep: 1,
        totalSteps: 3,
        selectedCoin: null,
        selectedKeyword: null,
        coinsWithKeywords: [],
        formData: null,
        createdCard: null,
      };

      // í˜ì´ì§€ ì´ˆê¸°í™”
      async function initializePage() {
        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
        const isLoggedIn = await checkLoginStatus();
        if (!isLoggedIn) {
          showAlert(
            "selectionAlert",
            "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. í™ˆí˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.",
            "error"
          );
          setTimeout(() => {
            window.location.href = "/";
          }, 2000);
          return;
        }

        // Form ë°ì´í„° í™•ì¸
        const formId = localStorage.getItem("currentFormId");
        if (!formId) {
          showAlert(
            "selectionAlert",
            "ì´ì „ ë‹¨ê³„ë¥¼ ë¨¼ì € ì™„ë£Œí•´ì£¼ì„¸ìš”. í™ˆí˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.",
            "error"
          );
          setTimeout(() => {
            window.location.href = "/";
          }, 2000);
          return;
        }

        loadFormData(formId);
        loadCoins();
        updateProgress();
      }

      // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
      async function checkLoginStatus() {
        const loginData = localStorage.getItem("voin_login");
        if (!loginData) {
          return false;
        }

        try {
          const user = JSON.parse(loginData);
          // í† í°ì´ ìœ íš¨í•œì§€ ì„œë²„ì—ì„œ ê°„ë‹¨íˆ í™•ì¸
          // í˜„ì¬ëŠ” localStorage ë°ì´í„°ê°€ ìˆìœ¼ë©´ ë¡œê·¸ì¸ëœ ê²ƒìœ¼ë¡œ ì²˜ë¦¬
          return true;
        } catch (e) {
          localStorage.removeItem("voin_login");
          return false;
        }
      }

      // Form ë°ì´í„° ë¡œë“œ
      async function loadFormData(formId) {
        try {
          const loginData = JSON.parse(localStorage.getItem("voin_login"));
          const response = await fetch(`/api/coin-finder/forms/${formId}`, {
            headers: {
              Authorization: `Bearer ${loginData.token}`,
            },
          });

          if (response.ok) {
            const result = await response.json();
            state.formData = result.data;
          } else {
            console.warn("Form ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
          }
        } catch (error) {
          console.error("Form ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", error);
        }
      }

      // ì½”ì¸ ë°ì´í„° ë¡œë“œ
      async function loadCoins() {
        try {
          showLoading("selectionAlert", "ì¥ì  ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...");

          const response = await fetch("/api/coin-finder/selection-options");
          const data = await response.json();

          if (data.success && data.data && data.data.coins) {
            // coins ê°ì²´ë¥¼ ë°°ì—´ë¡œ ë³€í™˜
            state.coinsWithKeywords = Object.values(data.data.coins);
            renderCategories();
            hideAlert("selectionAlert");
          } else {
            showAlert(
              "selectionAlert",
              "ì¥ì  ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
              "error"
            );
          }
        } catch (error) {
          showAlert(
            "selectionAlert",
            "ì¥ì  ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
            "error"
          );
        }
      }

      // ì¹´í…Œê³ ë¦¬ ë Œë”ë§
      function renderCategories() {
        const categoriesContainer = document.getElementById("coin-categories");
        categoriesContainer.innerHTML = "";

        state.coinsWithKeywords.forEach((coin, index) => {
          const categoryBtn = document.createElement("button");
          categoryBtn.className = "category-btn";
          categoryBtn.textContent = coin.name;
          categoryBtn.onclick = () => selectCategory(coin, categoryBtn);
          categoriesContainer.appendChild(categoryBtn);

          // ì²« ë²ˆì§¸ ì¹´í…Œê³ ë¦¬ë¥¼ ê¸°ë³¸ ì„ íƒ
          if (index === 0) {
            setTimeout(() => categoryBtn.click(), 100);
          }
        });
      }

      // ì¹´í…Œê³ ë¦¬ ì„ íƒ
      function selectCategory(coin, btnElement) {
        // ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        document
          .querySelectorAll(".category-btn")
          .forEach((btn) => btn.classList.remove("selected"));
        btnElement.classList.add("selected");

        state.selectedCoin = coin;
        state.selectedKeyword = null;
        document.getElementById("nextBtn").disabled = true;

        // í‚¤ì›Œë“œ ê·¸ë¦¬ë“œ ì—…ë°ì´íŠ¸
        renderKeywords(coin.keywords);
      }

      // í‚¤ì›Œë“œ ë Œë”ë§
      function renderKeywords(keywords) {
        const keywordGrid = document.getElementById("keyword-grid");
        keywordGrid.innerHTML = "";

        keywords.forEach((keyword) => {
          const keywordCard = document.createElement("div");
          keywordCard.className = "keyword-card";
          keywordCard.textContent = keyword.name;
          keywordCard.onclick = () => selectKeyword(keyword, keywordCard);
          keywordGrid.appendChild(keywordCard);
        });
      }

      // í‚¤ì›Œë“œ ì„ íƒ
      function selectKeyword(keyword, cardElement) {
        // í‚¤ì›Œë“œ ì¹´ë“œ ìƒíƒœ ì—…ë°ì´íŠ¸
        document
          .querySelectorAll(".keyword-card")
          .forEach((card) => card.classList.remove("selected"));
        cardElement.classList.add("selected");

        state.selectedKeyword = keyword;
        document.getElementById("nextBtn").disabled = false;

        showAlert(
          "selectionAlert",
          `"${keyword.name}" ì¥ì ì´ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.`,
          "success"
        );
      }

      // ìš”ì•½ ë‹¨ê³„ë¡œ ì´ë™
      function goToSummary() {
        if (!state.selectedKeyword) {
          showAlert("selectionAlert", "ë¨¼ì € ì¥ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”.", "error");
          return;
        }

        showStep("summaryStep");
        renderSummary();
      }

      // ìš”ì•½ ë Œë”ë§
      function renderSummary() {
        const summaryContent = document.getElementById("summaryContent");

        let experienceText = "ê²½í—˜ ë‚´ìš©";
        if (state.formData) {
          if (state.formData.type === "TODAY_DIARY") {
            experienceText = state.formData.description || "ì˜¤ëŠ˜ì˜ ì¼ê¸°";
          } else if (state.formData.type === "EXPERIENCE_REFLECTION") {
            experienceText = state.formData.description || "ì‚¬ë¡€ ëŒì•„ë³´ê¸°";
          }
        }

        summaryContent.innerHTML = `
                <h3>ì„ íƒëœ ë‚´ìš©</h3>
                <p><strong>ê²½í—˜:</strong> ${experienceText}</p>
                <p><strong>ì¥ì  ì¹´í…Œê³ ë¦¬:</strong> ${state.selectedCoin.name}</p>
                <p><strong>ì„ íƒí•œ ì¥ì :</strong> ${state.selectedKeyword.name}</p>
            `;
      }

      // ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°
      function goBackToSelection() {
        showStep("selectionStep");
      }

      // ì¹´ë“œ ìƒì„±
      async function createCard() {
        try {
          showLoading("summaryAlert", "ì¥ì  ì¹´ë“œë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...");

          const loginData = JSON.parse(localStorage.getItem("voin_login"));
          const formId = localStorage.getItem("currentFormId");

          const cardData = {
            formId: parseInt(formId),
            coinId: state.selectedCoin.id,
            keywordIds: [state.selectedKeyword.id],
          };

          const response = await fetch("/api/cards", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${loginData.token}`,
            },
            body: JSON.stringify(cardData),
          });

          if (response.ok) {
            const result = await response.json();
            state.createdCard = result.data;

            // ì„ì‹œ Form ID ì •ë¦¬
            localStorage.removeItem("currentFormId");

            showStep("completeStep");
            renderFinalCard();
          } else {
            const errorData = await response.json();
            showAlert(
              "summaryAlert",
              "ì¹´ë“œ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: " + (errorData.message || ""),
              "error"
            );
          }
        } catch (error) {
          showAlert(
            "summaryAlert",
            "ì¹´ë“œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
            "error"
          );
        }
      }

      // ìµœì¢… ì¹´ë“œ ì •ë³´ ë Œë”ë§
      function renderFinalCard() {
        const finalCardInfo = document.getElementById("finalCardInfo");

        let experienceText = "ê²½í—˜ ë‚´ìš©";
        if (state.formData) {
          if (state.formData.type === "TODAY_DIARY") {
            experienceText = state.formData.description || "ì˜¤ëŠ˜ì˜ ì¼ê¸°";
          } else if (state.formData.type === "EXPERIENCE_REFLECTION") {
            experienceText = state.formData.description || "ì‚¬ë¡€ ëŒì•„ë³´ê¸°";
          }
        }

        finalCardInfo.innerHTML = `
                <h3>ìƒì„±ëœ ì¥ì  ì¹´ë“œ</h3>
                <p><strong>ì¹´ë“œ ID:</strong> ${state.createdCard.id}</p>
                <p><strong>ê²½í—˜:</strong> ${experienceText}</p>
                <p><strong>ì¥ì  ì¹´í…Œê³ ë¦¬:</strong> ${
                  state.selectedCoin.name
                }</p>
                <p><strong>ë°œê²¬í•œ ì¥ì :</strong> ${
                  state.selectedKeyword.name
                }</p>
                <p><strong>ìƒì„± ì‹œê°„:</strong> ${new Date().toLocaleString()}</p>
            `;
      }

      // ë‹¨ê³„ í‘œì‹œ
      function showStep(stepId) {
        document
          .querySelectorAll(".step")
          .forEach((step) => step.classList.remove("active"));
        document.getElementById(stepId).classList.add("active");

        const stepNumber = {
          selectionStep: 1,
          summaryStep: 2,
          completeStep: 3,
        };

        state.currentStep = stepNumber[stepId] || 1;
        updateProgress();
      }

      // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
      function updateProgress() {
        const progress = (state.currentStep / state.totalSteps) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
        document.getElementById("currentStepText").textContent =
          state.currentStep;
      }

      // ì•Œë¦¼ í‘œì‹œ
      function showAlert(elementId, message, type = "success") {
        const element = document.getElementById(elementId);
        element.innerHTML = `<div class="alert ${type}">${message}</div>`;
      }

      // ë¡œë”© í‘œì‹œ
      function showLoading(elementId, message = "ì²˜ë¦¬ ì¤‘...") {
        const element = document.getElementById(elementId);
        element.innerHTML = `<div class="alert">
                <span class="loading"></span>${message}
            </div>`;
      }

      // ì•Œë¦¼ ìˆ¨ê¸°ê¸°
      function hideAlert(elementId) {
        const element = document.getElementById(elementId);
        element.innerHTML = "";
      }

      // í˜ì´ì§€ ì´ˆê¸°í™” ì‹¤í–‰
      initializePage();
    </script>
  </body>
</html>
